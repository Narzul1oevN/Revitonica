import React, { useState } from 'react';
// ะะผะฟะพัั ะบะพะผะฟะพะฝะตะฝัะพะฒ ะธ ััะธะปะตะน Swiper
import { Swiper, SwiperSlide } from 'swiper/react';
import { Navigation } from 'swiper/modules';
import 'swiper/css';
import 'swiper/css/navigation'; 

// --- ะะฐะฝะฝัะต ะดะปั ะพัะทัะฒะพะฒ ---
const doctorReviews = [
ย {
ย ย id: 1,
ย ย reviewText: 'ะญัะพ ะฑัะป ะฟัะพััะพ ัะฐะฝัะฐััะธัะตัะบะธะน ะฟะตัะธะพะด ะทะฝะฐะบะพะผััะฒะฐ ั ัะพะฑะพะน ะธ ัะฒะพะธะผะธ ะฒะพะทะผะพะถะฝะพัััะผะธ โ ะฑะตะท ะฟัะตัะฒะตะปะธัะตะฝะธะน! ะะฐัะฐะปะฐ ะฟัะธะฝะธะผะฐัั ะทะฐะบะฐะทั ัะถะต ะฒ ะฟะตัะฒัั ะฝะตะดะตะปั ะพะฑััะตะฝะธั, ะฐ ะฒะพ ะฒัะตะผั ะบัััะฐ ั ะฟัะพัะปะฐ ัะตัะตะท ะผะฝะพะถะตััะฒะพ ะณะปัะฑะพะบะธั ะทะฐะดะฐะฝะธะน, ะบะพัะพััะต ะฟะพะผะพะณะปะธ ะผะฝะต ะฟะพะฝััั, ะบะฐะบะธะต ััะปัะณะธ ะฒะพัััะตะฑะพะฒะฐะฝั, ะธ ะฝะฐััะธัััั ัะฐัะฟัะตะดะตะปััั ัะฒะพั ะฒัะตะผั ะฟัะฐะฒะธะปัะฝะพ ะธ ัะฐะฑะพัะฐัั ะดะพะผะฐ, ะฑะตะท ะฝะฐัะฐะปัััะฒะฐ ะธ ะฑะตัะบะพะฝะตัะฝะพะน ะดะพัะพะณะธ ะดะพ ัะฐะฑะพัั. ะขะตะฟะตัั ั ะผะพะณั ัะฐะฑะพัะฐัั ะธะท ะปัะฑะพะน ัะพัะบะธ ะผะธัะฐ ะธ ะฝะต ะทะฐะฒะธัะตัั ะพั ะพะดะฝะพะณะพ ะผะตััะฐ. ะัะพะฑะตะฝะฝะพ ะทะฐะฟะพะผะฝะธะปะธัั ัะฟัะฐะถะฝะตะฝะธั ะฟะพ ะฟะปะฐะฝะธัะพะฒะฐะฝะธั ะดะฝั. ะะปะฐะณะพะดะฐัั ััะธะผ ะทะฐะดะฐะฝะธัะผ ั ะฝะฐัะฐะปะฐ ะฟะพ-ะฝะพะฒะพะผั ัะผะพััะตัั ะฝะฐ ัะฒะพั ะถะธะทะฝั ะธ ัะฐะฑะพัั, ะฝะฐััะธะปะฐัั ัะตะฝะธัั ะบะฐะถะดะพะต ะผะณะฝะพะฒะตะฝะธะต ะธ ะถะธัั ะฒ ัะพะพัะฒะตัััะฒะธะธ ัะพ ัะฒะพะธะผะธ ะถะตะปะฐะฝะธัะผะธ. ะญัะพั ะบััั ััะฐะป ะฝะฐััะพััะธะผ ะฟัะพััะฒะพะผ ะดะปั ะผะตะฝั.',
ย },
ย {
ย ย id: 2,
ย ย reviewText: 'ะะฐะฟะธัั ะฒัะพัะพะน ะฒัััะตัะธ ะฟัะพะธะทะฒะตะปะฐ ะฝะฐ ะผะตะฝั ะพะณัะพะผะฝะพะต ะฒะฟะตัะฐัะปะตะฝะธะต. ะะฝ ะดะตะปะธะปัั ัะฒะพะธะผะธ ะผััะปัะผะธ ะธ ะพะฟััะพะผ ั ัะฐะบะพะน ัะฝะตัะณะธะตะน ะธ ะธัะบัะตะฝะฝะพัััั, ััะพ ั ััะฒััะฒะพะฒะฐะปะฐ, ะฑัะดัะพ ะพะฑัะฐััั ั ะฝะฐััะพััะธะผ ัะบัะฟะตััะพะผ. ะัะพะฑะตะฝะฝะพ ะทะฐะฟะพะผะฝะธะปัั ะตะณะพ ัะพะฒะตั ะพ ัะพะผ, ะบะฐะบ ะฒะตััะธ ะฟะตัะตะณะพะฒะพัั ั ะทะฐะบะฐะทัะธะบะฐะผะธ. ะญัะพั ะฟะพะดัะพะด ะฟะพะปะฝะพัััั ะธะทะผะตะฝะธะป ะผะพะต ะฒะพัะฟัะธััะธะต ัะฐะฑะพัั ะธ ะฟะพะผะพะณ ะฟะพะฝััั, ััะพ ะฒะฐะถะฝะพ, ะฐ ััะพ ะฝะต ะฒะฐะถะฝะพ, ะฝะฐ ัะตะผ ะผะพะถะฝะพ ะฑััััะพ ะธ ะปะตะณะบะพ ะทะฐัะฐะฑะพัะฐัั, ะฐ ััะพ ะฟัะธะฝะตัะตั ัะพะปัะบะพ ัะฐะฑัะบะธะน ัััะด. ะญัะพั ะบััั ะฟะพะผะพะณ ะผะฝะต ะฟะตัะตะพัะผััะปะธัั ัะฒะพะธ ัะตะปะธ ะธ ะฝะฐะนัะธ ะฝะพะฒัะต ะฟััะธ ะดะปั ะฟัะพัะตััะธะพะฝะฐะปัะฝะพะณะพ ะธ ะปะธัะฝะพััะฝะพะณะพ ัะพััะฐ.',
ย },
ย {
ย ย id: 3,
ย ย reviewText: 'ะญัะพั ะบััั ััะฐะป ะดะปั ะผะตะฝั ะฝะฐััะพััะธะผ ะพัะบัััะธะตะผ.',
ย },
ย {
ย ย id: 4,
ย ย reviewText: 'ะะฐัะฐะปะฐ ะทะฝะฐะบะพะผััะฒะพ ั ะบัััะพะผ ะธ ัะถะต ะพัััะฐั ะบะพะปะพััะฐะปัะฝัะน ะทะฐััะด ะผะพัะธะฒะฐัะธะธ! ะะฐะถะดะพะต ะฒะธะดะตะพ ะธ ะผะฐัะตัะธะฐะป ะฒะดะพัะฝะพะฒะปััั ะฝะฐ ะฝะพะฒัะต ะดะพััะธะถะตะฝะธั. ะะพัะปะต ะฟัะพัะพะถะดะตะฝะธั ะบัััะฐ ั ะผะตะฝั ะฟะพัะฒะธะปะพัั ะถะตะปะฐะฝะธะต ะฟะพะฑะตะถะดะฐัั ะธ ะดะพััะธะณะฐัั ััะฟะตัะพะฒ.',
ย },
ย {
ย ย id: 5,
ย ย reviewText: 'ะัะฑะธะป ะบััั ะฒ ะฟะตัะฒัะน ะถะต ะผะตััั! ะะฐัะตัะธะฐะปั ะบัััะฐ ะพัะตะฝั ะผะพัะฝัะต ะธ ะฝะฐัััะตะฝะฝัะต. ะะฐ ะบะพัะพัะบะพะต ะฒัะตะผั ั ะฟะพะปััะธะป ะฑะตััะตะฝะฝัั ะฟัะฐะบัะธัะตัะบัั ะธะฝัะพัะผะฐัะธั, ะบะพัะพัะฐั ะฟะพะผะพะณะฐะตั ะผะฝะต ะปะตะณะบะพ ะฝะฐัะพะดะธัั ะทะฐะบะฐะทัะธะบะพะฒ.',
ย },
ย {
ย ย id: 6,
ย ย reviewText: 'ะัะต ะฟัะพััะฝะธะปะพัั! ะฃะทะฝะฐะปะฐ ะฒัั, ััะพ ัะพัะตะปะฐ, ะธ ะดะฐะถะต ะฑะพะปััะต. ะะฐ ะฒัะต ะผะพะธ ะฒะพะฟัะพัั ะฟะพะปััะธะปะธ ะพัะฒะตัั, ะธ ัะตะฟะตัั ั ััะฒััะฒัั ัะตะฑั ัะฒะตัะตะฝะฝะตะต ะฒ ัะฒะพะธั ัะธะปะฐั. ะะปะฐะณะพะดะฐัั ะทะฐ ัะฐะบะพะน ััััะบัััะธัะพะฒะฐะฝะฝัะน ะธ ะฟะพะฝััะฝัะน ะฟะพะดัะพะด ะบ ะพะฑััะตะฝะธั.',
ย },
ย {
ย ย id: 8,
ย ย reviewText: 'ะัะต ะฑัะปะพ ะฝะฐ ะฒัััะตะผ ััะพะฒะฝะต! ะ ะพัะตัะตะดะฝะพะน ัะฐะท ัะทะฝะฐะปะฐ ะผะฝะพะณะพ ะฟะพะปะตะทะฝะพะน ะธะฝัะพัะผะฐัะธะธ.',
ย },
];

// --- ะัะฟะพะผะพะณะฐัะตะปัะฝัะน ะบะพะผะฟะพะฝะตะฝั ะดะปั ะบะฐััะพัะบะธ ะพัะทัะฒะฐ (ะะกะะะะะะะะ) ---
const ReviewCard = ({ reviewText }) => {
    // ะกะพััะพัะฝะธะต ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฒะธะดะธะผะพัััั ะฟะพะปะฝะพะณะพ ัะตะบััะฐ
    const [isExpanded, setIsExpanded] = useState(false);
    
    const maxWords = 35; // ะะณัะฐะฝะธัะตะฝะธะต ะฒ 35 ัะปะพะฒ ะดะปั ะพะฑัะตะทะบะธ
    const words = reviewText.split(/\s+/);
    const shouldTruncate = words.length > maxWords;
    
    // ะะฑัะตะทะฐะฝะฝัะน ัะตะบัั
    const truncatedText = words.slice(0, maxWords).join(' ') + '...';

    return (
        // โญ๏ธ ะกัะธะปั: ะคะธะบัะธัะพะฒะฐะฝะฝะฐั ะฒััะพัะฐ ะดะปั ะฒััะฐะฒะฝะธะฒะฐะฝะธั, ัะตะฝั ะธ ะทะฐะบััะณะปะตะฝะธะต
        <div className="bg-white rounded-2xl p-8 flex flex-col h-[480px] lg:h-[400px] border border-gray-100 transition duration-300">
            
            {/* ะะพะฝัะตะนะฝะตั ะดะปั ัะตะบััะฐ ั ะฒะพะทะผะพะถะฝะพัััั ัะบัะพะปะปะฐ ะฟัะธ ัะฐะทะฒะพัะพัะต */}
            <div className="flex-grow relative">
                
                {/* โญ๏ธ ะะบะพะฝะบะฐ ัะธัะฐัั ะดะปั ะฟัะพัะตััะธะพะฝะฐะปัะฝะพะณะพ ะฒะธะดะฐ */}
                <svg className="w-8 h-8 text-[#e8587a] mb-4 opacity-70" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M13.25 15.66c0 1.25.7 2.37 1.74 2.92.35.18.72.27 1.09.27.76 0 1.5-.27 2.15-.8C19.2 17.5 20 16.3 20 14.8V6h-6.75v8.86h3.41c-.04.47-.3.88-.66 1.15a.9.9 0 01-.7.29c-.3 0-.6-.11-.84-.33-.3-.27-.47-.64-.47-1.04v-4.83H13.25v7.75zm-6.75 0c0 1.25.7 2.37 1.74 2.92.35.18.72.27 1.09.27.76 0 1.5-.27 2.15-.8C12.45 17.5 13.2 16.3 13.2 14.8V6H6.45v8.86h3.4c-.03.47-.3.88-.66 1.15a.9.9 0 01-.7.29c-.3 0-.6-.11-.84-.33-.3-.27-.47-.64-.47-1.04v-4.83H6.5v7.75z"/>
                </svg>

                {/* โ ะะกะะะะะะะะะะฏ ะะะะะะ ะะะะกะกะะ ะะะฏ ะกะะะะะะ */}
                <div 
                    className={`text-lg text-gray-700 leading-relaxed 
                        ${shouldTruncate 
                            ? `max-h-[300px] lg:max-h-[250px] ${isExpanded ? 'overflow-y-auto pr-3' : 'overflow-hidden'}` 
                            : ''
                        }`
                    }
                >
                    <p className="font-light">
                        {isExpanded ? reviewText : (shouldTruncate ? truncatedText : reviewText)}
                    </p>
                </div>
                
                {/* โญ๏ธ ะกัะธะปั: ะญััะตะบั ะณัะฐะดะธะตะฝัะฝะพะณะพ ะทะฐัััะฐะฝะธั, ะบะพะณะดะฐ ัะตะบัั ะพะฑัะตะทะฐะฝ */}
                {!isExpanded && shouldTruncate && (
                    <div className="absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-white to-transparent pointer-events-none"></div>
                )}
            </div>

            {/* ะะฝะพะฟะบะฐ "ะะพะบะฐะทะฐัั/ะกะบัััั" - ะฒัะตะณะดะฐ ะฒะฝะธะทั ะบะฐััะพัะบะธ */}
            {shouldTruncate && (
                <button
                    onClick={() => setIsExpanded(!isExpanded)}
                    className="mt-6 py-2 px-4 bg-[#e8587a] text-white font-semibold rounded-lg shadow-lg hover:bg-[#c43a5d] transition-all duration-300 focus:outline-none self-start"
                >
                    {isExpanded ? 'ะกะบัััั ะฟะพะปะฝัะน ะพัะทัะฒ ๐' : 'ะงะธัะฐัั ะฟะพะปะฝะพัััั ๐'}
                </button>
            )}
        </div>
    );
};

// --- ะัะฝะพะฒะฝะพะน ะบะพะผะฟะพะฝะตะฝั ะกะตะบัะธะธ ---
const Section9 = () => {
ย return (
ย ย <section className="bg-[#f7f9fc] py-16 md:py-20">
ย ย ย <div className="max-w-7xl mx-auto px-5 lg:px-8">
ย ย ย ย {/* ะะฐะณะพะปะพะฒะพะบ */}
ย ย ย ย <h2 className="text-3xl md:text-4xl font-extrabold text-[#0b1a3d] text-center mb-8 md:mb-12">
ย ย ย ย ย ะัะทัะฒั ะพ ะบัััะต
ย ย ย ย </h2>

ย ย ย ย {/* ะะฑะตััะบะฐ ะบะฐัััะตะปะธ ัะพ ัััะตะปะบะฐะผะธ */}
ย ย ย ย <div className="relative">
ย ย ย ย ย <Swiper
ย ย ย ย ย ย modules={[Navigation]} 
ย ย ย ย ย ย breakpoints={{
ย ย ย ย ย ย ย 0: { slidesPerView: 1, spaceBetween: 24 }, 
ย ย ย ย ย ย ย 768: { slidesPerView: 2, spaceBetween: 32 }, 
ย ย ย ย ย ย ย 1024: { slidesPerView: 3, spaceBetween: 32 }, 
ย ย ย ย ย ย }}
ย ย ย ย ย ย loop={true} 
ย ย ย ย ย ย navigation={{
ย ย ย ย ย ย ย prevEl: '.swiper-button-prev-custom',
ย ย ย ย ย ย ย nextEl: '.swiper-button-next-custom',
ย ย ย ย ย ย }}
ย ย ย ย ย ย className="mySwiper px-10 md:px-0" 
ย ย ย ย ย >
ย ย ย ย ย ย {doctorReviews.map((review) => (
ย ย ย ย ย ย ย <SwiperSlide key={review.id}>
ย ย ย ย ย ย ย ย <ReviewCard reviewText={review.reviewText} /> 
ย ย ย ย ย ย ย </SwiperSlide>
ย ย ย ย ย ย ))}
ย ย ย ย ย </Swiper>
ย ย ย ย ย 
ย ย ย ย ย {/* โญ๏ธ ะกัะธะปั: ะะฐััะพะผะฝัะต ัะปะตะผะตะฝัั ะฝะฐะฒะธะณะฐัะธะธ Swiper (ะกััะตะปะบะธ) - ะฃะปัััะตะฝะฝัะน ะดะธะทะฐะนะฝ */}
ย ย ย ย ย 
ย ย ย ย ย {/* ะะฝะพะฟะบะฐ "ะะฐะทะฐะด" */}
ย ย ย ย ย <div className="swiper-button-prev-custom custom-arrow absolute top-1/2 -translate-y-1/2 z-20 left-4 md:left-0 lg:-left-12 w-12 h-12 rounded-full bg-white text-[#e8587a] flex items-center justify-center cursor-pointer transition-all duration-300 shadow-md hover:shadow-lg hover:bg-gray-50 border border-gray-100">
ย ย ย ย ย ย <svg width="10" height="18" viewBox="0 0 10 18" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-4 h-4">
ย ย ย ย ย ย ย <path d="M9 1L1 9L9 17" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
ย ย ย ย ย ย </svg>
ย ย ย ย ย </div>

ย ย ย ย ย {/* ะะฝะพะฟะบะฐ "ะะฟะตัะตะด" */}
ย ย ย ย ย <div className="swiper-button-next-custom custom-arrow absolute top-1/2 -translate-y-1/2 z-20 right-4 md:right-0 lg:-right-12 w-12 h-12 rounded-full bg-white text-[#e8587a] flex items-center justify-center cursor-pointer transition-all duration-300 shadow-md hover:shadow-lg hover:bg-gray-50 border border-gray-100">
ย ย ย ย ย ย <svg width="10" height="18" viewBox="0 0 10 18" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-4 h-4">
ย ย ย ย ย ย ย <path d="M1 17L9 9L1 1" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
ย ย ย ย ย ย </svg>
ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย </div>
ย ย </section>
ย );
};

export default Section9;